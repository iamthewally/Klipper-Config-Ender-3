
# Filament swap
[gcode_macro M600]
gcode:
   {% set retractLen = 10.0 %}
   #{% set Y = 0 %}
   #{% set Z = 10 %}
   #SAVE_GCODE_STATE NAME=M600_state
   #G91
   #G1 E-.8 F2700
   #G1 Z{Z}
   #G90
   #G1 X{X} Y{Y} F3000
   #G91
   #G1 E-{retractLen} F1000
   PAUSE
   #RESTORE_GCODE_STATE NAME=M600_state MOVE=1